<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>最青春的你们</title>
    <style>
        //@import url("https://fonts.googleapis.com/css2?family=Kalam:wght@400&display=swap");

        :root {
            --adjust-size: 0px;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        html, body {
            overscroll-behavior-x: none;
            overscroll-behavior-y: none;
            scroll-behavior: smooth;
        }
        body {
            position: relative;
            color: #222;
            font-family: "Kalam", sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            background-image: url("./thumb/img.png");
            background-size: cover;
        }
        main {
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: 100vw;
            min-height: 100vh;
            overflow-x: hidden;
        }
        p {
            line-height: 1;
        }
        a {
            color: crimson;
            text-decoration: none;
        }
        img {
            -moz-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
            pointer-events: none;
        }

        #gallery {
            position: relative;
            left: calc(-1 * var(--adjust-size));
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            max-width: 100vw;
            padding: 20px;
            perspective: 0;
        }

        #gallery figure:nth-child(7n) { --duration: 1s; --pin-color: crimson; }
        #gallery figure:nth-child(7n + 1) { --duration: 1.8s; --pin-color: hotpink; }
        #gallery figure:nth-child(7n + 2) { --duration: 1.3s; --pin-color: magenta; }
        #gallery figure:nth-child(7n + 3) { --duration: 1.5s; --pin-color: orangered; }
        #gallery figure:nth-child(7n + 4) { --duration: 1.1s; --pin-color: darkorchid; }
        #gallery figure:nth-child(7n + 5) { --duration: 1.6s; --pin-color: deeppink; }
        #gallery figure:nth-child(7n + 6) { --duration: 1.2s; --pin-color: mediumvioletred; }
        #gallery figure:nth-child(3n) { --angle: 3deg; }
        #gallery figure:nth-child(3n + 1) { --angle: -3.3deg; }
        #gallery figure:nth-child(3n + 2) { --angle: 2.4deg; }
        #gallery figure:nth-child(odd) { --direction: alternate; }
        #gallery figure:nth-child(even) { --direction: alternate-reverse; }

        #gallery figure {
            --angle: 3deg;
            --count: 5;
            --duration: 1s;
            --delay: calc(-0.5 * var(--duration));
            --direction: alternate;
            --pin-color: red;

            position: relative;
            display: inline-block;
            margin: var(--adjust-size);
            padding: 0.5rem;
            border-radius: 5px;
            box-shadow: 0 7px 8px rgba(0,0,0,0.4);
            width: 100%;
            height: auto;
            text-align: center;
            background-color: ghostwhite;
            background-image: url("#");
            background-size: cover;
            background-position: center;
            background-blend-mode: multiply;
            transform-origin: center 0.22rem;
            will-change: transform;
            break-inside: avoid;
            overflow: hidden;
            outline: 1px solid transparent;
            backface-visibility: hidden;
        }

        #gallery.active figure {
            animation-duration: var(--duration), 1.5s;
            animation-delay: var(--delay), calc(var(--delay) + var(--duration) * var(--count));
            animation-timing-function: ease-in-out;
            animation-iteration-count: var(--count), 1;
            animation-direction: var(--direction), normal;
            animation-fill-mode: both;
            animation-name: swing, swingEnd;
        }

        #gallery figure::after {
            position: absolute;
            top: 0.22rem;
            left: 50%;
            width: 0.7rem;
            height: 0.7rem;
            content: "";
            background: var(--pin-color);
            border-radius: 50%;
            box-shadow: -0.1rem -0.1rem 0.3rem 0.02rem rgba(0,0,0,0.5) inset;
            filter: drop-shadow(0.3rem 0.15rem 0.2rem rgba(0,0,0,0.5));
            transform: translateX(-50%);
            z-index: 2;
        }

        figure img {
            aspect-ratio: 1 / 1;
            width: 100%;
            object-fit: cover;
            display: block;
            border-radius: 5px;
            margin-bottom: 10px;
            z-index: 1;
            cursor: pointer;
            pointer-events: auto;
        }

        figure figcaption {
            font-size: 14px;
            font-weight: 400;
            overflow: hidden;
            white-space: nowrap;
            text-overflow: ellipsis;
            z-index: 1;
        }

        @keyframes swing {
            0% { transform: rotate3d(0, 0, 1, calc(-1 * var(--angle))); }
            100% { transform: rotate3d(0, 0, 1, var(--angle)); }
        }
        @keyframes swingEnd {
            to { transform: rotate3d(0, 0, 1, 0deg); }
        }

        /* Lightbox */
        #lightbox {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        #lightbox img {
            max-width: 90%;
            max-height: 90%;
            border: 3px solid white;
            border-radius: 8px;
            pointer-events: none;
        }

        @media (min-width: 800px) {
            #gallery {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            }
        }
    </style>
</head>
<body>
<main>
    <div id="gallery"></div>
</main>

<div id="lightbox" onclick="closeLightbox()">
    <img id="lightbox-img" src="" alt="Full size image">
</div>

<script>
    // 相片数据
    const photos = [
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody1.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody2.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody3.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody4.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody5.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody6.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody7.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody8.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody9.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody10.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody11.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody12.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody13.jpeg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody14.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody15.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody16.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody17.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody18.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody19.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody20.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody21.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody22.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody23.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody24.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody25.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody26.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody27.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody28.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody29.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody30.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody31.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody32.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody33.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody34.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody35.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody36.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody37.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody38.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody39.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody40.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody41.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody42.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody43.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody44.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody45.jpg"},
        {"name":"somebody","photo":"http://files.yuanchen.space/blogs/somebody/somebody46.jpg"},

    ];

    // 渲染图库
    const gallery = document.getElementById('gallery');
    photos.forEach(item => {
        const figure = document.createElement('figure');
        const img = document.createElement('img');
        img.src = item.photo;
        img.alt = item.name;
        img.title = item.name;
        img.onclick = () => openLightbox(item.photo);

        const caption = document.createElement('figcaption');
        caption.textContent = item.name;

        figure.appendChild(img);
        figure.appendChild(caption);
        gallery.appendChild(figure);
    });

    // Lightbox 功能
    function openLightbox(src) {
        const lb = document.getElementById('lightbox');
        const img = document.getElementById('lightbox-img');
        img.src = src;
        lb.style.display = 'flex';
        document.body.style.overflow = 'hidden'; // 防止背景滚动
    }

    function closeLightbox() {
        document.getElementById('lightbox').style.display = 'none';
        document.body.style.overflow = ''; // 恢复滚动
    }

    // ESC 关闭
    document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeLightbox();
    });

    // 启动动画
    window.onload = () => {
        const obj = document.querySelector("#gallery");
        const time = 10000;
        function animStart() {
            if (!obj.classList.contains("active")) {
                obj.classList.add("active");
                setTimeout(animEnd, time);
            }
        }
        function animEnd() {
            obj.classList.remove("active");
            obj.offsetWidth; // 触发重排
        }
        document.addEventListener("scroll", animStart);
        window.addEventListener("resize", animStart);
        animStart();
    };
</script>
</body>
</html>